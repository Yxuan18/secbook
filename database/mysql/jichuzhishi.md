# 基础知识

## 一、初识MySQL

### 1、特性

1. 使用C和C++编写，并使用了多种编译器进行测试，保证源代码的可移植性。
2. 支持AIX、FreeBSD、HP-UX、Linux、Mac OS、NovellNetware、OpenBSD、OS/2 Wrap、Solaris、Windows等多种操作系统。
3. 为多种编程语言提供了API。这些编程语言包括C、C++、Python、Java、Perl、PHP、Eiffel、Ruby,.NET和Tcl等。
4. 支持多线程，充分利用CPU资源。
5. 优化的SQL查询算法，可有效地提高查询速度。
6. 既能够作为一个单独的应用程序应用在客户端服务器网络环境中，也能够作为一个库嵌入到其他的软件中。
7. 提供多语言支持，常见的编码如中文的GB 2312、BIG5，日文的Shift\_JIS等都可以用作数据表名和数据列名。
8. 提供TCP/IP、ODBC和JDBC等多种数据库连接途径。
9. 提供用于管理、检查、优化数据库操作的管理工具。
10. 支持大型的数据库，可以处理拥有上千万条记录的大型数据库。
11. 支持多种存储引擎。
12. MySQL是开源的，所以用户不需要支付额外的费用。
13. MySQL使用标准的SQL数据语言形式。
14. MySQL对PHP有很好的支持，PHP是目前最流行的Web开发语言之一。
15. MySQL是可以定制的，采用了GPL协议，用户可以修改源码来开发自己的MySQL系统。
16. 在线DDL/更改功能，数据架构支持动态应用程序和开发人员灵活性。
17. 复制全局事务标识，可支持自我修复式集群。
18. 复制无崩溃从机，可提高可用性。
19. 复制多线程从机，可提高性能。

### 2、安装MySQL

开源软件特点：

1. 降低风险
2. 质量更有保障
3. 透明
4. 剪裁
5. 有利的版权和许可价格

安装过程：

1、Windows端，本人使用了phpstudy直接安装  
2、Linux端，可通过使用源码包的方式下载，下载好之后进入命令行设置密码并重启服务即可

```text
SET PASSWORD FOR'root'@'localhost'=PASSWORD('123456'); #在MySQL命令行中设置root账户的密码为123456
```

### 3、可视化管理工具

工具种类及详情如下：

1. MySQL Workbench： MySQL Workbench是一个由MySQL开发的跨平台、可视化数据库工具。它作为DBDesigner4工程的替代应用程序而备受瞩目。MySQL Workbench可以作为Windows、Linux和OS X系统上的原始GUI工具，它有各种不同的版本。
2. Aqua Data Studio： 对于数据库管理人员、软件开发人员以及业务分析师来说，Aqua Data Studio是一个完整的集成开发环境（Intergrated Development Environment，IDE）。它主要具备了以下4个方面的功能：         ⑴数据库查询和管理工具；         ⑵一套数据库、源代码管理以及文件系统的比较工具；         ⑶为Subversion（SVN）和CVS设计了一个完整的集成源代码管理客户端；         ⑷提供了一个数据库建模工具（Modeler），它和最好的独立数据库图表工具一样强大。
3. SQLyogSQLyog： 是一个全面的MySQL数据库管理工具。它的社区版（Community Edition）是具有GPL许可的免费开源软件。这款工具包含了开发人员在使用MySQL时所需的绝大部分功能：查询结果集合、查询分析器、服务器消息、表格数据、表格信息，以及查询历史，它们都以标签的形式显示在界面上，开发人员只要单击鼠标即可。此外，它还可以方便地创建视图和存储过程。
4. MySQL-Front： 这个MySQL数据库的图形GUI是一个“真正的”应用程序，它提供的用户界面比用PHP和HTML建立起来的系统更加精确。因为不会因为重载HTML网页而导致延时，所以它的响应是即时的。如果供应商允许的话，可以让MySQL-Front直接与数据库进行工作。如果不行，也只需要在发布网站上安装一个小的脚本即可。
5. Sequel ProSequel Pro： 是一款管理Mac OS X数据库的应用程序，它可以让用户直接访问本地以及远程服务器上的MySQL数据库，并且支持从流行的文件格式中导入和导出数据，其中包括SQL、CSV和XML等文件。

以Navicat为例，下面是该软件的安装过程：

官方地址：http://www.navicat.com.cn/download/navicat-for-mysql

#### 1、Linux

1、下载文件到根目录后

```text
sudo su    #切换到root账户
tar -zxvf navicat_for_mysql_10.0.11_cn_linux.tar.gz    #解压文文件到/opt/目录下
cd /opt/navicat    #进入软件的安装目录
./start_navicat    #启动Navicat
```

#### 2、Windows

1、双击安装程序，然后点击下一步

![](../../.gitbook/assets/mysql01001.jpg)

2、我同意→下一步

![](../../.gitbook/assets/mysql01002.jpg)

3、选择文件夹，并点击下一步

![](../../.gitbook/assets/mysql01003.jpg)

4、下一步→下一步→下一步→安装→完成，即可

5、双击打开破解程序，并选中安装好的navicat文件

![](../../.gitbook/assets/mysql01004.jpg)

6、等到出现这个界面后，破解成功

![](../../.gitbook/assets/mysql01005.jpg)

7、打开Navicat，并点击连接，可打开连接界面

![](../../.gitbook/assets/mysql01006.jpg)

8、在界面中，输入密码即可连接

![](../../.gitbook/assets/mysql01007.jpg)

9、下图是链接成功的界面状态

![](../../.gitbook/assets/mysql01008.jpg)

### 4、Windows7中单独卸载MySQL

1. 在Windows服务中停止MySQL的服务。
2. 打开“控制面板”，单击“程序和功能”，找到“MySQL”，右键单击从下拉菜单中选择卸载（或者使用其他软件卸载）。
3. 卸载完成后，删除安装目录下的MySQL文件夹及程序数据文件夹，如C:\Program Files\(x86\)\MySQL和C:\ProgramData\MySQL。
4. 在运行中输入“regedit”，进入注册表，将所有的MySQL注册表内容完全清除，具体删除内容如下：①HKEY\_LOCAL\_MACHINE\SYSTEM\ControlSet001\Services\Eventlog\Application\MySQL 目录删除；②HKEY\_LOCAL\_MACHINE\SYSTEM\ControlSet002\Services\Eventlog\Application\MySQL 目录删除；③HKEY\_LOCAL\_MACHINE\SYSTEM\CurrentControlSet\Services\Eventlog\Application\MySQL目录删除。
5. 操作完成重新启动计算机。

## 二、MySQL数据库基础

### 1、基础相关

1、MySQL版本分类：

1. MySQL Community Server，社区版本，开源免费，但不提供官方技术支持。
2. MySQL Enterprise Edition，企业版本，需付费，可以试用30天。
3. MySQL Cluster，集群版，开源免费，可将几个MySQL Server封装成一个Server。
4. MySQL Cluster CGE，高级集群版，需付费。
5. MySQL Workbench（GUI TOOL），一款专为MySQL设计的ER/数据库建模工具。它是著名的数据库设计工具DBDesigner4的继任者。MySQL Workbench又分为两个版本，分别是社区版（MySQL Workbench OSS）、商用版（MySQL Workbench SE）。

2、MySQL优势

1. MySQL是一个关系数据库管理系统。
2. MySQL是开源的。
3. MySQL服务器是一个快速、可靠和易于使用的数据库服务器。
4. MySQL服务器工作在客户/服务器或嵌入系统中。
5. 有大量的MySQL软件可以使用。

3、Oracle优点

1. 兼容性： Oracle产品采用标准SQL，并经过美国国家标准技术所（NIST）测试。与IBM SQL/DS、DB2、INGRES、IDMS/R等兼容。
2. 可移植性：

   Oracle的产品可运行于很宽范围的硬件与操作系统平台上。可以安装在70种以上不同的大、中、小型机上；可在VMS、DOS、UNIX、Windows等多种操作系统下工作。

3. 可连接性：

   Oracle能与多种通信网络相连，支持各种协议（TCP/IP、DECnet、LU6.2等）。

4. 高生产率： Oracle产品提供了多种开发工具，能极大地方便用户进行进一步的开发。
5. 开放性：

   Oracle良好的兼容性、可移植性、可连接性和高生产率使Oracle RDBMS具有良好的开放性。

### 2、关系型数据模型

一、数据模型：能表示实体类型及实体间联系的模型称为“数据模型”

数据模型分类：

1、概念数据模型：  
独立于计算机系统的数据模型，完全不涉及信息在计算机中的表示，只是用来描述某个特定组织所关心的信息结构

2、逻辑数据模型：  
直接面向数据库的逻辑结构，它是对现实世界的第二层抽象。  
逻辑数据模型应该包含数据结构、数据操作和数据完整性约束3个部分，通常有一组严格定义的无二义性语法和语义的数据库语言，人们可以用这种语言来定义、操作数据库中的数据。  
其中包括层次模型、网状模型、关系模型和面向对象模型。

其中：  
层次模型和网状模型已经很少应用  
面向对象模型比较复杂，尚未达到关系模型数据库的普及程度

3、关系模型：

由若干个关系模式组成的集合，关系模式的实例称为关系，每个关系实际上是一张二维表格。关系模型用键导航数据，其表格简单，用户只需用简单的查询语句就可以对数据库进行操作，并不涉及存储结构、访问技术等细节。

4、关系数据库相关：  
SQL语言是关系数据库的代表性语言，已经得到了广泛的应用。  
典型的关系数据库产品有DB2、Oracle、Sybase、SQL Server等。  
概念：  
关系数据库是以关系模型为基础的数据库，是一种根据表、元组、字段之间的关系进行组织和访问数据的数据库，它通过若干个表来存取数据，并且通过关系将这些表联系在一起。

5、数据库支持模型：

层次模型（Hierarchical Model）  
网状模型（Network Model）  
关系模型（Relational Model）

6、关系模型有3个组成部分：

数据结构  
数据操作  
完整性规则

7、关系模型中的术语：

1. 关系（Relation）：对应通常所说的一张表。
2. 元组（Tuple）：表中的一行即为一个元组，可以用来标识实体集中的一个实体，表中任意两行（元组）不能相同；
3. 属性（Attribute）：表中的一列即为一个属性，给每个属性起一个名称即属性名，表中的属性名不能相同。
4. 主键（Key）：表中的某个属性组，它可以唯一确定一个元组。
5. 域（Domain）：列的取值范围称为域，同列具有相同的域，不同的列也可以有相同的域。
6. 分量：元组中的一个属性值。
7. 关系模式：对关系的描述。可表示为：关系名（属性1，属性2，…，属性n）。

8、关系表格的性质

1. 属性值具有原子性，不可分解。
2. 没有重复的元组。
3. 理论上没有行序，但是使用时有时可以有行序。

9、关键码（键）：

性质：  
是用来标识行（元组）的一个或几个列（属性）。如果键是唯一的属性，则称为唯一键；反之由多个属性组成，则称为复合键

主要类型：

1. 超键：在一个关系中，能唯一标识元组的属性或属性集称为关系的超键。
2. 候选键：如果一个属性集能唯一标识元组，且又不含有多余的属性，那么这个属性集称为关系的候选键。
3. 主键：如果一个关系中有多个候选键，则选择其中的一个键为关系的主键。用主键可以实现关系定义中“表中任意两行（元组）不能相同”的约束。
4. 外键：如果一个关系R中包含另一个关系S的主键所对应的属性组F，则称此属性组F为关系R的外键，并称关系S为参照关系，关系R是依赖关系。为了表示关联，可以将一个关系的主键作为属性放入另外一个关系中，第二个关系中的那些属性就称为外键。

10、关系数据操作语言

概念：  
分为查询语句和更新语句两大类。查询语句用于描述用户的各类检索要求；更新语句用于描述用户的插入、修改和删除等操作。

特点：

1. 以关系为单位进行数据操作，操作的结果也是关系。
2. 非过程性强。很多操作只需指出做什么，而无需步步引导怎么去做。
3. 以关系代数为基础，借助于传统的集合运算和专门的关系运算，使关系数据语言具有很强的数据操作能力。

数据操作语句及释义：

| 操作 | 释义 |
| :--- | :--- |
| SELECT | 按指定的条件在一个数据库中查询的结果，返回的结果被看作记录的集合 |
| SELECT...INTO | 用于创建一个查询表 |
| INSERT INTO | 用于向一个表添加一个或多个记录 |
| UPDATE | 用于创建一个更新查询，根据指定的条件更改指定表中的字段值。该语句不生成结果集，而且当使用更新查询更新记录之后，不能取消这次操作 |
| DELETE | 用于创建一个删除查询，可从列在FROM子句之中的一个或多个表中删除记录，且该子句满足WHERE子句中的条件，可以使用DELETE删除多个记录 |
| INNER JOIN | 用于组合两个表中的记录，只要在公共字段之中有相符的值。可以在任何FROM子句中使用INNER JOIN运算，这是最普通的连接类型。只要在这两个表的公共字段之中有相符的值，内部连接将组合两个表中的记录 |
| LEFT JOIN | 用于在任何FROM子句中组合来源表的记录。使用LEFT JOIN运算来创建一个左边外部连接。左边外部连接将包含从第一个（左边）开始的两个表中的全部记录，即使在第二个（右边）表中并没有相符值的记录 |
| RIGHT JOIN | 用于在任何FROM子句中组合来源表的记录。使用RIGHT JOIN运算创建一个右边外部连接。右边外部连接将包含从第二个（右边）表开始的两个表中的全部记录，即使在第一个（左边）表中并没有匹配值的记录 |
| PARAMETERS | 用于声明在参数查询中的每一个参数的名称及数据类型。该声明是可选的，但是当使用时，须置于任何其他语句之前，包括SELECT语句 |
| UNION | 用于创建一个联合查询，它组合了两个或更多的独立查询或表的结果。所有在一个联合运算中的查询，都须请求相同数目的字段，但是字段不必大小相同或数据类型相同 |

11、SQL的RDMS的12项准则：

1. 信息准则：关系数据库中的所有信息都应在逻辑一层上用表中的值显式的表示。
2. 保证访问准则：依靠于表名、主键和列名，保证能以逻辑方式访问数据库中的每个数据项。
3. 空值的系统化处理：RDBMS支持空值（不同于空的字符串或空白字符串，并且不为0）系统化地表示缺少的信息，且与数据类型无关。
4. 基于关系模型的联机目录：数据库的描述在逻辑上应该和一般数据采用同样的方式，使得授权用户可以使用查询一般数据所用的关系语言来查询数据库的描述信息。
5. 统一的数据子语言准则：一个关系系统可以具有多种语言和多种终端使用方式（如表格填空方式、命令行方式等）。但是，必须有一种语言，它的语句可以表示为具有严格语法规定的字符串，并能全面地支持以下功能：数据定义、视图定义、数据操作（交互式或程序式）、完整约束、授权、事务控制（事务开始、提交、撤销）。
6. 视图更新准则：所有理论上可更新的视图也应该允许由系统更新。
7. 高阶的插入、更新和删除：把一个基本关系或导出关系作为一个操作对象进行数据的检索以及插入、更新和删除。
8. 数据的物理独立性：无论数据库的数据在存储表示上或存取方法上做何种变化，应用程序和终端活动都要保持逻辑上的不变性。
9. 数据的逻辑独立性：当基本表中进行理论上信息不受损害的任何变化时，应用程序和终端活动都要保持逻辑上的不变性。
10. 数据完整的独立性：关系数据库的完整性约束必须是用数据子语言定义并存储在目录中的，而不是在应用程序中加以定义的。至少要支持以下两种约束：         ①实体完整性，即主键中的属性不允许为空值（NULL）；         ②参照完整性，即对于关系数据库中每个不同的非空的外码值，必须存在一个取自同一个域匹配的主键值。
11. 分布独立性：一个RDBMS应该具有分布独立性。分布独立性是指用户不必了解数据库是否是分布式的。
12. 无破坏准则：如果RDBMS有一个低级语言（一次处理一个记录），这一低级语言不能违背或绕过完整性准则以及高级关系语言（一次处理若干记录）表达的约束。

12、关系模型的完整性规则是对数据的约束。关系模型提供了3类完整性规则：

1. 实体完整性： 指关系的主属性（主键的组成部分）不能是NULL。NULL就是指不知道或是不能使用的值，它与数值0和空字符串的意义都不一样。
2. 参照完整性： 如果关系的外键R1与关系R2中的主键相符，那么外键的每个值必须在关系R2中主键的值中找到或者是空值。
3. 用户定义完整性： 是针对某一具体的实际数据库的约束条件。它由应用环境所决定，反映某一具体应用所涉及的数据必须满足的要求。关系模型提供定义和检验这类完整性的机制，以便用统一、系统的方法处理，而不必由应用程序承担这一功能。

### 3、关系型数据模型中的数据依赖与范式

关系模型原理的核心内容就是规范化概念，规范化是把数据库组织成在保持存储数据完整性的同时最小化冗余数据的结构的过程。规范化的数据库必须符合关系模型的范式规则。范式可以防止在使用数据库时出现不一致的数据，并防止数据丢失。关系模型的范式有第一范式、第二范式、第三范式和BCNF范式等多种。在这些定义中，高级范式根据定义属于所有低级的范式。第三范式中的关系属于第二范式，第二范式中的关系属于第一范式。

1、第一范式

第一范式是第二范式和第三范式的基础，是最基本的范式。第一范式包括下列指导原则。

1. 数据组的每个属性只可以包含一个值。
2. 关系中的每个数组必须包含相同数量的值。
3. 关系中的每个数组一定不能相同。

如果关系模式R中的所有属性值都是不可再分解的原子值，那么就称此关系R是第一范式（First Normal Form，1NF）的关系模式。在关系型数据库管理系统中，涉及的研究对象都是满足1NF的规范化关系，不是1NF的关系称为非规范化的关系。

2、第二范式

第二范式（2NF）规定关系必须在第一范式中，并且关系中的所有属性依赖于整个候选键。候选键是一个或多个唯一标识每个数据组的属性集合。

3、第三范式

第三范式（3NF）同2NF一样依赖于关系的候选键。为了遵循3NF的指导原则，关系必须在2NF中，非键属性相互之间必须无关，并且必须依赖于键。

### 4、常见关系型数据库管理系统

常见的关系型数据库管理系统产品有Oracle、SQL Server、Sybase、DB2、Access等

### 5、MySQL数据库系统的结构体系

![MySQL&#x4F53;&#x7CFB;&#x7ED3;&#x6784;&#x56FE;](../../.gitbook/assets/image%20%2898%29.png)

1. 支持接口：是指不同语言中与SQL的交互。
2. 管理服务和工具：系统管理和控制工具。
3. 连接池：管理缓冲用户连接、线程处理等需要缓存的需求。
4. SQL接口：接受用户的SQL命令，并且返回用户需要查询的结果，如select from就是调用SQL Interface。
5. 解析器：SQL命令传递到解析器的时候会被解析器验证和解析，解析器是由Lex和YACC实现的，是一个很长的脚本，其主要功能如下。     ①将SQL语句分解成数据结构，并将这个结构传递到后续步骤，以后SQL语句的传递和处理就是基于这个结构的。     ②如果在分解构成中遇到错误，那么就说明这个SQL语句是不合理的。
6. 查询优化器：SQL语句在查询之前会使用查询优化器对查询进行优化。它使用“选取→投影→连接”策略进行查询。
7. 缓存和缓冲池：查询缓存。如果查询缓存有命中的查询结果，查询语句就可以直接去查询缓存中取数据。这个缓存机制是由一系列小缓存组成的。比如表缓存、记录缓存、Key缓存、权限缓存等。
8. 存储引擎：存储引擎是MySQL中具体的与文件打交道的子系统。也是MySQL最具有特色的一个地方。从MySQL 5.5之后，InnoDB就是MySQL的默认事务引擎

### [6、MySQL存储引擎](https://xu-an.gitbook.io/sec/database/mysql/jichuzhishi#3-shu-ju-ku-cun-chu-yin-qing)

MySQL 5.6支持的存储引擎有InnoDB、MyISAM、Memory、Merge、Archive、Federated、CSV、BLACKHOLE等。其中InnoDB是支持事务型的存储引擎，从MySQL 5.5之后，InnoDB就是MySQL的默认事务引擎。InnoDB支持事务安全表（ACID），也支持行锁定和外键。InnoDB为MySQL提供了具有事务（transaction）、回滚（rollback）和崩溃修复能力（crash recovery capabilities）、多版本并发控制（multi-versioned concurrency control）的事务安全（transaction-safe \(ACID compliant\)）型表。

## 三、MySQL管理工具使用

### 1、MySQL administrator

1、MySQL Administrator是用来执行数据库管理操作的程序，以及用来监视和管理MySQL实例的数据库、用户的权限和数据的实用程序，比如MySQL服务的配置、控制、开启和关闭，还可用于管理用户和连接数据库，执行数据备份和其他的一些管理任务。

2、优点：

1. 它的图形化的用户界面为用户提供了非常直观的接口。
2. 它提供了较好的全局设置，这对于MySQL服务器的可执行性、可信度和安全性是相当重要的。
3. 它提供了图形化的性能显示，使中止服务器和更改服务器的设置更加简单。

### 2、phpmyadmin



### 3、Navicat for MySQL



### 4、MySQL访问权限系统



### 5、MySQL用户账户管理



### 6、MySQL的安全性问题



## 四、数据库基本操作

### 1、创建数据库



### 2、删除数据库



### 3、数据库存储引擎



## 

